// Generated by CoffeeScript 1.6.3
(function() {
  var Nex,
    __slice = [].slice;

  Nex = this.Nex || require('nex');

  Nex.Panel = {
    getData: function(query) {
      var _this = this;
      if (!query) {
        return this.log("Panel: query is empty, aborting " + query);
      }
      if (typeof query === 'string') {
        query = {
          path: query
        };
      }
      this.query = query;
      if (Nex.debug) {
        this.log('(Nex.Panel) @query: ', this.query);
      }
      return Nex.Models.Asset.get(query, false).done(function() {
        if (Nex.debug) {
          _this.log.apply(_this, ['(Nex.Panel) result: '].concat(__slice.call(arguments), [_this]));
        }
        return _this.trigger.apply(_this, ['ready'].concat(__slice.call(arguments)));
      }).fail(function() {
        return _this.log("Panel: Could not get data for panel " + _this.query);
      });
    },
    setTitle: function(result) {
      var title;
      title = Nex.Models.Setting.findByAttribute('name', 'title');
      return $('title').text("" + (result.headline || 'Imago') + " - " + title.value);
    }
  };

  module.exports = Nex.Panel;

}).call(this);

/*
//@ sourceMappingURL=panel.map
*/
